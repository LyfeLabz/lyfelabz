<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Is It Alive? | LyfeLabz</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Fredoka+One&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --green: #2ecc71;
    --green-dark: #27ae60;
    --blue: #3498db;
    --teal: #1abc9c;
    --purple: #9b59b6;
    --red: #e74c3c;
    --orange: #e67e22;
    --yellow: #f1c40f;
    --dark: #1a2535;
    --dark2: #243447;
    --card: #1e2f42;
    --text: #e8f4f8;
    --text-muted: #8aafca;
    --border: rgba(52,152,219,0.2);
    /* accent aliases kept for game logic */
    --bio: #2ecc71;
    --gold: #f1c40f;
    --gold-glow: rgba(241,196,15,0.35);
    --phys: #3498db;
    --neuro: #9b59b6;
    --astro: #9b59b6;
    --chem: #e67e22;
  }
  *{margin:0;padding:0;box-sizing:border-box;}
  body{font-family: 'Nunito', sans-serif;background:var(--dark);color:var(--text);line-height:1.6;overflow-x:hidden;min-height:100vh;}
  #stars{position:fixed;inset:0;pointer-events:none;z-index:0;opacity:0.55;}
  nav,.page-hero,.hud,.game-section,footer{position:relative;z-index:1;}

  /* NAV */
  nav{position:sticky;top:0;z-index:100;background:rgba(20,30,45,0.97);backdrop-filter:blur(14px);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0.85rem 2.5rem;}
  .nav-logo {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.35rem;
    font-weight: 900;
    color: var(--gold);
    text-decoration: none;
    letter-spacing: 0.06em;
    text-shadow: 0 0 18px var(--gold-glow);
  }
  .nav-links{display:flex;gap:2rem;list-style:none;flex-wrap:wrap;align-items:center;}
  .nav-links a{color:var(--muted);text-decoration:none;font-size:0.82rem;font-weight:600;letter-spacing:0.08em;text-transform:uppercase;transition:color 0.2s;}
  .nav-links a:hover{color: var(--green);}
  .nav-back {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.78rem;
    font-weight: 800;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--green);
    background: rgba(46,204,113,0.1);
    border: 1px solid rgba(46,204,113,0.4);
    padding: 0.35rem 0.9rem;
    border-radius: 99px;
  }
  .nav-badge{font-size:0.7rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;padding:0.22rem 0.7rem;border-radius:99px;color:var(--bio);background:rgba(61,220,132,0.1);border:1px solid rgba(61,220,132,0.3);}

  /* HERO */
  .page-hero{padding:3.5rem 2rem 2rem;text-align:center;
    background:radial-gradient(ellipse 60% 50% at 50% 0%,rgba(61,220,132,0.07) 0%,transparent 70%),
               radial-gradient(ellipse 40% 40% at 80% 80%,rgba(245,200,66,0.05) 0%,transparent 60%);}
  .page-eyebrow{display:inline-flex;align-items:center;gap:0.5rem;background:rgba(61,220,132,0.1);border:1px solid rgba(61,220,132,0.3);color:var(--bio);padding:0.4rem 1.2rem;border-radius:99px;font-size:0.75rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;margin-bottom:1.2rem;animation:fadeUp 0.5s ease both;}
  .page-hero h1{font-family: 'Fredoka One', cursive;font-size:clamp(1.8rem,5vw,3rem);font-weight:900;line-height:1.1;margin-bottom:0.8rem;animation:fadeUp 0.6s 0.08s ease both;}
  .title-accent{background:linear-gradient(135deg,var(--bio) 0%,var(--gold) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
  .page-hero p{color:var(--muted);font-size:0.97rem;max-width:600px;margin:0 auto;animation:fadeUp 0.6s 0.16s ease both;}
  @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}

  /* HUD */
  .hud{display:flex;justify-content:center;gap:1rem;padding:1.2rem 2rem;flex-wrap:wrap;}
  .hud-item{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:0.7rem 1.4rem;text-align:center;min-width:110px;transition:border-color 0.3s,box-shadow 0.3s;}
  .hud-item.flash{border-color:var(--bio);box-shadow:0 0 16px rgba(61,220,132,0.2);}
  .hud-label{font-size:0.62rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted);font-family:'Orbitron',sans-serif;display:block;margin-bottom:2px;}
  .hud-value{font-family:'Orbitron',sans-serif;font-size:1.3rem;font-weight:900;color:var(--gold);display:block;transition:color 0.3s,transform 0.2s;}
  .hud-value.pop{color:var(--bio);transform:scale(1.25);}

  /* GAME LAYOUT */
  .game-section{padding:0 1.5rem 3rem;max-width:1160px;margin:0 auto;}
  .game-layout{display:grid;grid-template-columns:1fr 320px;gap:1.5rem;align-items:start;}

  /* MAIN CARD */
  .game-card{background:var(--card);border:1px solid var(--border);border-radius:24px;padding:2rem;position:relative;overflow:hidden;}
  .game-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--bio),var(--gold));border-radius:24px 24px 0 0;}

  /* SCENARIO */
  .scenario{display:flex;align-items:center;gap:1.2rem;margin-bottom:1.4rem;padding:1.2rem 1.4rem;background:var(--ink3);border:1px solid rgba(61,220,132,0.18);border-radius:16px;}
  .scenario-emoji{font-size:3rem;line-height:1;flex-shrink:0;}
  .scenario-title{font-family:'Sora',sans-serif;font-size:1.2rem;font-weight:800;margin-bottom:0.2rem;color:var(--text);}
  .scenario-prompt{color:var(--muted);font-size:0.9rem;line-height:1.55;}

  /* CHECKBOXES */
  .checks-label{font-size:0.72rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted);font-family:'Orbitron',sans-serif;margin-bottom:0.75rem;}
  .checks{display:grid;grid-template-columns:1fr 1fr;gap:0.75rem;margin-bottom:1.4rem;}
  .check{display:flex;align-items:flex-start;gap:0.8rem;padding:0.9rem 1rem;border-radius:14px;border:2px solid var(--border);background:rgba(255,255,255,0.02);cursor:pointer;transition:all 0.18s;user-select:none;position:relative;}
  .check:hover{border-color:rgba(61,220,132,0.35);background:rgba(61,220,132,0.05);transform:translateY(-1px);}
  .check input[type=checkbox]{appearance:none;-webkit-appearance:none;width:20px;height:20px;border-radius:6px;border:2px solid rgba(180,160,255,0.4);background:rgba(255,255,255,0.04);cursor:pointer;flex-shrink:0;margin-top:2px;transition:all 0.18s;position:relative;}
  .check input[type=checkbox]:checked{background:var(--bio);border-color:var(--bio);}
  .check input[type=checkbox]:checked::after{content:'‚úì';position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#fff;font-size:12px;font-weight:900;line-height:1;}
  .check input:disabled{opacity:0.6;cursor:not-allowed;}
  .check b{display:block;font-size:0.88rem;font-weight:700;color:var(--text);}
  .check span{color:var(--muted);font-size:0.78rem;}

  /* Feedback states on check tiles */
  .check.result-right{border-color:rgba(61,220,132,0.6)!important;background:rgba(61,220,132,0.08)!important;}
  .check.result-wrong{border-color:rgba(255,112,67,0.6)!important;background:rgba(255,112,67,0.08)!important;}
  .check .check-badge{display:none;position:absolute;top:6px;right:8px;font-size:0.7rem;font-weight:800;}
  .check.result-right .check-badge{display:block;color:var(--bio);}
  .check.result-wrong .check-badge{display:block;color:var(--chem);}

  /* FEEDBACK (inline, above actions) */
  .feedback{border-radius:14px;padding:1rem 1.2rem;display:none;margin-bottom:1.2rem;}
  .feedback.show{display:block;}
  .feedback.good{background:rgba(61,220,132,0.08);border:1px solid rgba(61,220,132,0.35);}
  .feedback.bad{background:rgba(255,112,67,0.08);border:1px solid rgba(255,112,67,0.35);}
  .feedback-title{font-family:'Sora',sans-serif;font-size:1rem;font-weight:800;margin-bottom:0.3rem;}
  .feedback-title.good{color:var(--bio);}
  .feedback-title.bad{color:var(--chem);}
  .feedback-body{font-size:0.86rem;color:rgba(232,230,244,0.88);line-height:1.6;}
  .feedback-small{font-size:0.78rem;color:var(--muted);margin-top:0.45rem;font-weight:600;}

  /* ACTIONS */
  .actions{display:flex;gap:0.75rem;flex-wrap:wrap;align-items:center;}
  .verdict-btn{padding:0.75rem 1.8rem;background:linear-gradient(135deg,var(--bio),#28c070);border:none;border-radius:12px;color:#0a1a10;font-family: 'Nunito', sans-serif;font-weight:800;font-size:0.9rem;cursor:pointer;letter-spacing:0.04em;transition:all 0.2s;box-shadow:0 4px 20px rgba(61,220,132,0.25);}
  .verdict-btn:hover{transform:translateY(-1px);box-shadow:0 8px 28px rgba(61,220,132,0.4);}
  .verdict-btn:disabled{opacity:0.45;cursor:not-allowed;transform:none;box-shadow:none;}
  .next-btn{padding:0.75rem 1.8rem;background:linear-gradient(135deg,var(--gold),#ff9a42);border:none;border-radius:12px;color:#111;font-family: 'Nunito', sans-serif;font-weight:800;font-size:0.9rem;cursor:pointer;letter-spacing:0.04em;transition:all 0.2s;box-shadow:0 4px 20px rgba(245,200,66,0.25);}
  .next-btn:hover{transform:translateY(-1px);box-shadow:0 8px 28px rgba(245,200,66,0.4);}
  .next-btn:disabled{opacity:0.45;cursor:not-allowed;transform:none;box-shadow:none;}
  .ghost-btn{padding:0.75rem 1.2rem;background:transparent;border:1.5px solid rgba(255,255,255,0.16);border-radius:12px;color:var(--muted);font-family: 'Nunito', sans-serif;font-weight:700;font-size:0.85rem;cursor:pointer;transition:all 0.2s;}
  .ghost-btn:hover{border-color:rgba(245,200,66,0.4);color:var(--gold);}

  /* SIDE PANEL */
  .side-stack{display:flex;flex-direction:column;gap:1rem;}
  .side-card{background:var(--card);border:1px solid var(--border);border-radius:20px;padding:1.4rem;}
  .side-title{font-family:'Sora',sans-serif;font-size:1rem;font-weight:800;margin-bottom:0.9rem;color:var(--text);}

  /* Characteristics reference list */
  .char-list{display:flex;flex-direction:column;gap:0.5rem;}
  .char-item{display:flex;align-items:flex-start;gap:0.7rem;padding:0.65rem 0.8rem;border-radius:12px;border:1px solid var(--border);background:rgba(255,255,255,0.02);}
  .char-ico{font-size:1.1rem;width:1.4rem;text-align:center;flex-shrink:0;}
  .char-name{font-size:0.84rem;font-weight:700;color:var(--text);display:block;}
  .char-hint{font-size:0.75rem;color:var(--muted);}

  /* How-to steps */
  .how-steps{display:flex;flex-direction:column;gap:0.5rem;}
  .how-step{display:flex;align-items:flex-start;gap:0.7rem;padding:0.55rem 0.8rem;border-radius:12px;font-size:0.82rem;color:var(--muted);}
  .how-step strong{color:var(--text);display:block;font-size:0.84rem;}
  .step-num{font-family:'Orbitron',sans-serif;font-size:0.65rem;font-weight:900;color:var(--gold);background:rgba(245,200,66,0.12);border:1px solid rgba(245,200,66,0.3);border-radius:99px;padding:0.15rem 0.5rem;flex-shrink:0;margin-top:2px;}

  /* PROGRESS DOTS */
  .progress-dots{display:flex;gap:0.4rem;justify-content:center;padding:0.6rem 0 1.2rem;flex-wrap:wrap;}
  .dot{width:10px;height:10px;border-radius:50%;background:var(--ink3);border:1px solid var(--border);transition:all 0.3s;}
  .dot.done-right{background:var(--bio);border-color:var(--bio);box-shadow:0 0 6px rgba(61,220,132,0.5);}
  .dot.done-wrong{background:var(--chem);border-color:var(--chem);}
  .dot.current{background:var(--gold);border-color:var(--gold);box-shadow:0 0 8px rgba(245,200,66,0.6);}

  /* WIN MODAL */
  .modal{display:none;position:fixed;inset:0;background:rgba(11,14,26,0.9);z-index:300;align-items:center;justify-content:center;backdrop-filter:blur(8px);}
  .modal.show{display:flex;}
  .modal-box{background:var(--ink2);border:1px solid rgba(61,220,132,0.35);border-radius:24px;padding:3rem 2.5rem;max-width:460px;width:92%;text-align:center;box-shadow:0 0 80px rgba(61,220,132,0.12);animation:popIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275);}
  @keyframes popIn{from{transform:scale(0.75);opacity:0}to{transform:scale(1);opacity:1}}
  .modal-trophy{font-size:4rem;margin-bottom:1rem;}
  .modal-box h2{font-family:'Orbitron',sans-serif;font-size:1.55rem;font-weight:900;color:var(--gold);margin-bottom:0.5rem;text-shadow:0 0 20px var(--gold-glow);}
  .modal-box p{color:var(--muted);font-size:0.9rem;margin-bottom:1.2rem;line-height:1.65;}
  .modal-score{font-family:'Orbitron',sans-serif;font-size:2.6rem;font-weight:900;background:linear-gradient(135deg,var(--gold),#ff9a42);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
  .modal-grade{font-size:0.88rem;color:var(--bio);margin-top:0.3rem;margin-bottom:1.5rem;font-weight:700;}
  .modal-restart{padding:0.85rem 2.2rem;background:linear-gradient(135deg,var(--gold),#ff9a42);border:none;border-radius:12px;color:#111;font-family: 'Nunito', sans-serif;font-weight:800;font-size:0.95rem;cursor:pointer;transition:all 0.2s;box-shadow:0 4px 24px rgba(245,200,66,0.35);}
  .modal-restart:hover{transform:translateY(-2px);box-shadow:0 8px 32px rgba(245,200,66,0.5);}

  /* FOOTER */
  footer{background:var(--ink2);border-top:1px solid var(--border);padding:2rem;text-align:center;position:relative;z-index:1;}
  .footer-logo{font-family:'Orbitron',sans-serif;font-size:1rem;font-weight:900;color:var(--gold);letter-spacing:0.08em;margin-bottom:0.4rem;text-shadow:0 0 12px var(--gold-glow);}
  footer p{font-size:0.8rem;color:var(--muted);}

  ::-webkit-scrollbar{width:6px;}
  ::-webkit-scrollbar-track{background:var(--dark);}
  ::-webkit-scrollbar-thumb{background:var(--dark2);border-radius:3px;}

  @media(max-width:860px){
    .game-layout{grid-template-columns:1fr;}
    .side-stack{display:grid;grid-template-columns:1fr 1fr;gap:1rem;}
  }
  @media(max-width:580px){
    .checks{grid-template-columns:1fr;}
    .side-stack{grid-template-columns:1fr;}
    .nav-links { display: none; }
    nav{padding:0.75rem 1.2rem;}
    .game-section{padding:0 1rem 2rem;}
  }
</style>
</head>
<body>
<canvas id="stars"></canvas>

<nav>
  <a href="index.html" class="nav-logo">LYFELABZ</a>
  <ul class="nav-links">
    <li><a href="characteristics.html">üî¨ Review Lab</a></li>
    <li><a href="index.html#subjects">Subjects</a></li>
  </ul>
  <span class="nav-back">üå± Biology</span>
</nav>

<div class="page-hero">
  <div class="page-eyebrow">üå± Biology ¬∑ Characteristics of Life ¬∑ Game</div>
  <h1>Is It <span class="title-accent">Alive?</span></h1>
  <p>A scientist drops a mystery thing on your lab bench. Check which of the <strong>6 characteristics of life</strong> it shows ‚Äî then hit Verdict to find out if you're right!</p>
</div>

<div class="hud">
  <div class="hud-item" id="hudScore">
    <span class="hud-label">Score</span>
    <span class="hud-value" id="scoreVal">0</span>
  </div>
  <div class="hud-item">
    <span class="hud-label">Round</span>
    <span class="hud-value" id="roundVal">1 / 10</span>
  </div>
  <div class="hud-item">
    <span class="hud-label">Streak üî•</span>
    <span class="hud-value" id="streakVal">0</span>
  </div>
  <div class="hud-item">
    <span class="hud-label">Accuracy</span>
    <span class="hud-value" id="accVal">‚Äî</span>
  </div>
</div>

<div class="game-section">
  <div class="progress-dots" id="dots"></div>

  <div class="game-layout">

    <!-- MAIN GAME CARD -->
    <div class="game-card">

      <div class="scenario">
        <div class="scenario-emoji" id="scenarioEmoji">üß´</div>
        <div>
          <div class="scenario-title" id="scenarioTitle">Loading‚Ä¶</div>
          <div class="scenario-prompt" id="scenarioPrompt">Get ready.</div>
        </div>
      </div>

      <div class="checks-label">Which characteristics does it show?</div>
      <div class="checks" id="checksWrap"></div>

      <div class="feedback" id="feedbackBox">
        <div class="feedback-title" id="fbTitle"></div>
        <div class="feedback-body" id="fbText"></div>
        <div class="feedback-small" id="fbSmall"></div>
      </div>

      <div class="actions">
        <button class="verdict-btn" id="verdictBtn" onclick="checkVerdict()">‚úÖ Verdict</button>
        <button class="next-btn" id="nextBtn" onclick="nextRound()" disabled>Next ‚Üí</button>
        <button class="ghost-btn" onclick="restartGame()">üîÑ Restart</button>
      </div>

    </div>

    <!-- SIDE PANEL -->
    <div class="side-stack">

      <!-- How to play -->
      <div class="side-card">
        <div class="side-title">How to Play</div>
        <div class="how-steps">
          <div class="how-step"><span class="step-num">1</span><div><strong>Read the scenario</strong>What is this thing doing?</div></div>
          <div class="how-step"><span class="step-num">2</span><div><strong>Check the boxes</strong>Which life characteristics does it show?</div></div>
          <div class="how-step"><span class="step-num">3</span><div><strong>Hit Verdict</strong>Get instant feedback + points for every box you get right.</div></div>
          <div class="how-step"><span class="step-num">4</span><div><strong>Build a streak</strong>All-correct rounds count toward your streak bonus.</div></div>
        </div>
      </div>

      <!-- Characteristics reference -->
      <div class="side-card">
        <div class="side-title">6 Characteristics of Life</div>
        <div class="char-list">
          <div class="char-item"><div class="char-ico">üî¨</div><div><span class="char-name">Made of Cells</span><span class="char-hint">One cell or many cells</span></div></div>
          <div class="char-item"><div class="char-ico">‚ö°</div><div><span class="char-name">Obtain &amp; Use Energy</span><span class="char-hint">Needs fuel to function</span></div></div>
          <div class="char-item"><div class="char-ico">üìà</div><div><span class="char-name">Grow &amp; Develop</span><span class="char-hint">Changes over its lifetime</span></div></div>
          <div class="char-item"><div class="char-ico">üß¨</div><div><span class="char-name">Reproduce</span><span class="char-hint">Makes offspring or copies</span></div></div>
          <div class="char-item"><div class="char-ico">üëÅÔ∏è</div><div><span class="char-name">Respond to Stimuli</span><span class="char-hint">Reacts to environment</span></div></div>
          <div class="char-item"><div class="char-ico">‚öñÔ∏è</div><div><span class="char-name">Maintain Homeostasis</span><span class="char-hint">Keeps internal balance</span></div></div>
        </div>
      </div>

    </div>
  </div>
</div>

<div class="modal" id="winModal">
  <div class="modal-box">
    <div class="modal-trophy">üèÜ</div>
    <h2>Lab Complete!</h2>
    <p>You've assessed every specimen. Check your accuracy ‚Äî anything under 80% means those tricky ones are worth a second look!</p>
    <div class="modal-score" id="modalScore">0 pts</div>
    <div class="modal-grade" id="modalGrade"></div>
    <button class="modal-restart" onclick="restartGame()">üîÑ Play Again</button>
  </div>
</div>

<footer>
  <div class="footer-logo">LYFELABZ</div>
  <p>Your middle school science hub ¬∑ lyfelabz.com ¬∑ made for curious scientists everywhere</p>
</footer>

<script>
// ‚îÄ‚îÄ STARFIELD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const canvas=document.getElementById('stars'),ctx=canvas.getContext('2d');let stars=[];
function resizeStars(){canvas.width=window.innerWidth;canvas.height=document.body.scrollHeight;stars=[];const n=Math.floor(canvas.width*canvas.height/3800);for(let i=0;i<n;i++)stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.4+0.2,a:Math.random()*0.65+0.1,speed:Math.random()*0.3+0.04,phase:Math.random()*Math.PI*2});}
function drawStars(t){ctx.clearRect(0,0,canvas.width,canvas.height);stars.forEach(s=>{const a=s.a*(0.55+0.45*Math.sin(t*0.001*s.speed+s.phase));ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fillStyle=`rgba(220,210,255,${a})`;ctx.fill();});requestAnimationFrame(drawStars);}
window.addEventListener('resize',()=>{clearTimeout(window._rt);window._rt=setTimeout(resizeStars,200);});
resizeStars();requestAnimationFrame(drawStars);

// ‚îÄ‚îÄ DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const characteristics = [
  { key:'cells',   title:'Made of Cells',         hint:'One cell or many cells.' },
  { key:'energy',  title:'Obtain & Use Energy',   hint:'Needs energy to function.' },
  { key:'grow',    title:'Grow & Develop',         hint:'Changes over its lifetime.' },
  { key:'repro',   title:'Reproduce',              hint:'Makes offspring or copies.' },
  { key:'stimuli', title:'Respond to Stimuli',     hint:'Reacts to the environment.' },
  { key:'homeo',   title:'Maintain Homeostasis',   hint:'Keeps internal conditions stable.' },
];

const rounds = [
  { emoji:'üåª', title:'Sunflower', prompt:'A sunflower turns toward the light and grows taller over time.',
    truth:{cells:true,energy:true,grow:true,repro:true,stimuli:true,homeo:true},
    explain:'Plants show all 6 characteristics ‚Äî they are made of cells, use energy from sunlight, grow, reproduce by seed, respond to stimuli like light, and maintain internal water balance.' },
  { emoji:'üî•', title:'Fire', prompt:'A flame spreads across paper and gives off heat and light.',
    truth:{cells:false,energy:true,grow:false,repro:false,stimuli:false,homeo:false},
    explain:'Fire is a chemical reaction ‚Äî it releases energy (combustion) but has no cells, doesn\'t grow biologically, can\'t reproduce, and doesn\'t maintain homeostasis.' },
  { emoji:'üßä', title:'Ice Crystal', prompt:'An ice crystal forms a six-sided pattern and can grow larger in the freezer.',
    truth:{cells:false,energy:false,grow:false,repro:false,stimuli:false,homeo:false},
    explain:'Crystals can increase in size, but this is a physical process ‚Äî not biological growth. Ice has no cells, uses no energy, and shows none of the other life characteristics.' },
  { emoji:'ü¶†', title:'Bacterium', prompt:'A bacterium absorbs nutrients from its environment and divides into two identical cells.',
    truth:{cells:true,energy:true,grow:true,repro:true,stimuli:true,homeo:true},
    explain:'Bacteria are living, unicellular prokaryotes that show all 6 characteristics of life ‚Äî including responding to chemical signals in their environment and maintaining internal pH.' },
  { emoji:'ü¶†', title:'Virus', prompt:'A virus injects its DNA into a cell and hijacks the cell\'s machinery to make copies of itself.',
    truth:{cells:false,energy:false,grow:false,repro:true,stimuli:false,homeo:false},
    explain:'Viruses are the classic debate case! They can replicate (using a host cell), but they have no cells of their own, don\'t use energy independently, and can\'t maintain homeostasis. Most scientists consider them nonliving.' },
  { emoji:'ü§ñ', title:'Robot Dog', prompt:'A robot dog walks around, recharges its battery, and responds to voice commands.',
    truth:{cells:false,energy:true,grow:false,repro:false,stimuli:true,homeo:false},
    explain:'Robots can use energy and respond to stimuli, but they are not made of cells, don\'t grow biologically, can\'t reproduce on their own, and don\'t maintain homeostasis the way living things do.' },
  { emoji:'üçÑ', title:'Mushroom', prompt:'A mushroom grows from the ground, absorbs nutrients from soil, and releases spores into the air.',
    truth:{cells:true,energy:true,grow:true,repro:true,stimuli:true,homeo:true},
    explain:'Fungi are living organisms ‚Äî they are made of cells, obtain energy by decomposing matter, grow over time, reproduce via spores, respond to environmental conditions, and maintain homeostasis.' },
  { emoji:'üåø', title:'Leaf Cutting', prompt:'A cutting from a plant is placed in water and slowly grows new roots, eventually becoming a full plant.',
    truth:{cells:true,energy:true,grow:true,repro:true,stimuli:true,homeo:true},
    explain:'This is asexual reproduction in plants. The cutting is still living ‚Äî it shows all 6 characteristics, including responding to gravity (roots grow down) and maintaining water balance.' },
  { emoji:'üß´', title:'Yeast', prompt:'Yeast consumes sugar, releases CO‚ÇÇ gas that makes bread rise, and reproduces by budding off new cells.',
    truth:{cells:true,energy:true,grow:true,repro:true,stimuli:true,homeo:true},
    explain:'Yeast is a unicellular fungus (eukaryotic) that shows all 6 characteristics of life. It\'s a great reminder that not all fungi are mushrooms!' },
  { emoji:'üå±', title:'Dormant Seed', prompt:'A dry seed sits motionless for months, then sprouts when it finally receives water and warmth.',
    truth:{cells:true,energy:true,grow:true,repro:true,stimuli:true,homeo:true},
    explain:'Dormant does NOT mean nonliving. The seed\'s cells are alive but metabolically slow. When conditions are right, it responds to stimuli (water, warmth) and resumes all life processes.' },
  { emoji:'ü™®', title:'Rock', prompt:'A rock sits in a river, slowly wearing away and changing shape over thousands of years.',
    truth:{cells:false,energy:false,grow:false,repro:false,stimuli:false,homeo:false},
    explain:'Rocks change shape through erosion, but this is a physical/chemical process ‚Äî not a biological one. Rocks have no cells and show none of the characteristics of life.' },
  { emoji:'üê£', title:'Egg (fertilized)', prompt:'A fertilized chicken egg is kept warm and after 21 days a chick hatches.',
    truth:{cells:true,energy:true,grow:true,repro:true,stimuli:true,homeo:true},
    explain:'A fertilized egg is definitely living ‚Äî it is made of cells that are actively dividing, uses stored energy (yolk), grows and develops, and the embryo responds to temperature.' },
];

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let order=[],idx=0,totalScore=0,correctRounds=0,attemptedRounds=0,streak=0;

function shuffle(arr){const a=[...arr];for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}
function pct(){return attemptedRounds===0?'‚Äî':Math.round(correctRounds/attemptedRounds*100)+'%';}

function buildChecks(){
  const wrap=document.getElementById('checksWrap'); wrap.innerHTML='';
  characteristics.forEach(c=>{
    const id='chk_'+c.key;
    const label=document.createElement('label');
    label.className='check'; label.setAttribute('for',id);
    label.innerHTML=`
      <input type="checkbox" id="${id}"/>
      <div>
        <b>${c.title}</b>
        <span>${c.hint}</span>
      </div>
      <span class="check-badge" id="badge_${c.key}"></span>
    `;
    wrap.appendChild(label);
  });
}

function buildDots(){
  const d=document.getElementById('dots'); d.innerHTML='';
  order.forEach((_,i)=>{
    const dot=document.createElement('div');
    dot.className='dot'+(i===0?' current':'');
    dot.id='dot'+i;
    d.appendChild(dot);
  });
}

function updateDot(i,right){
  const dot=document.getElementById('dot'+i);
  if(dot){dot.classList.remove('current');dot.classList.add(right?'done-right':'done-wrong');}
  const next=document.getElementById('dot'+(i+1));
  if(next) next.classList.add('current');
}

function popHUD(){
  const sv=document.getElementById('scoreVal');
  sv.classList.add('pop');setTimeout(()=>sv.classList.remove('pop'),350);
  const hi=document.getElementById('hudScore');
  hi.classList.add('flash');setTimeout(()=>hi.classList.remove('flash'),500);
}

function setRound(r){
  const s=rounds[r];
  document.getElementById('scenarioEmoji').textContent=s.emoji;
  document.getElementById('scenarioTitle').textContent=s.title;
  document.getElementById('scenarioPrompt').textContent=s.prompt;
  document.getElementById('roundVal').textContent=`${idx+1} / ${order.length}`;

  characteristics.forEach(c=>{
    const box=document.getElementById('chk_'+c.key);
    box.checked=false; box.disabled=false;
    const label=box.closest('.check');
    label.classList.remove('result-right','result-wrong');
    document.getElementById('badge_'+c.key).textContent='';
  });

  document.getElementById('feedbackBox').className='feedback';
  document.getElementById('verdictBtn').disabled=false;
  document.getElementById('nextBtn').disabled=true;
  document.getElementById('nextBtn').textContent='Next ‚Üí';
}

function checkVerdict(){
  const s=rounds[order[idx]];
  let allCorrect=true, wrongCount=0;

  characteristics.forEach(c=>{
    const chosen=document.getElementById('chk_'+c.key).checked;
    const should=s.truth[c.key];
    const label=document.getElementById('chk_'+c.key).closest('.check');
    const badge=document.getElementById('badge_'+c.key);
    if(chosen===should){
      label.classList.add('result-right');
      badge.textContent='‚úì';
    } else {
      label.classList.add('result-wrong');
      badge.textContent='‚úó';
      allCorrect=false; wrongCount++;
    }
    document.getElementById('chk_'+c.key).disabled=true;
  });

  attemptedRounds++;
  if(allCorrect){ correctRounds++; streak++; totalScore+=100+Math.min(streak*15,60); popHUD(); }
  else { streak=0; totalScore+=Math.max(0,(6-wrongCount)*12); }

  updateDot(idx,allCorrect);

  document.getElementById('scoreVal').textContent=totalScore;
  document.getElementById('streakVal').textContent=streak;
  document.getElementById('accVal').textContent=pct();

  const fb=document.getElementById('feedbackBox');
  fb.className='feedback show '+(allCorrect?'good':'bad');
  document.getElementById('fbTitle').className='feedback-title '+(allCorrect?'good':'bad');
  document.getElementById('fbTitle').textContent=allCorrect?'‚úÖ Perfect round!':'‚ùå Not quite';
  document.getElementById('fbText').textContent=s.explain;
  document.getElementById('fbSmall').textContent=allCorrect
    ?`+${100+Math.min(streak*15,60)} pts ¬∑ Streak: ${streak} üî•`
    :`${wrongCount} box${wrongCount===1?'':'es'} wrong ‚Äî check the highlighted boxes above.`;

  document.getElementById('verdictBtn').disabled=true;
  document.getElementById('nextBtn').disabled=false;
  if(idx===order.length-1) document.getElementById('nextBtn').textContent='üèÅ Finish';
}

function nextRound(){
  if(idx<order.length-1){ idx++; setRound(order[idx]); }
  else showFinal();
}

function showFinal(){
  const pctNum=Math.round(correctRounds/Math.max(attemptedRounds,1)*100);
  document.getElementById('modalScore').textContent=totalScore+' pts';
  const grade=pctNum>=90?`${pctNum}% ¬∑ A+ ‚Äî Life Science Expert!`
    :pctNum>=75?`${pctNum}% ¬∑ B ‚Äî Great Work!`
    :pctNum>=60?`${pctNum}% ¬∑ C ‚Äî Keep Practicing!`
    :`${pctNum}% ¬∑ Review the notes and try again!`;
  document.getElementById('modalGrade').textContent=grade;
  document.getElementById('winModal').classList.add('show');
}

function restartGame(){
  order=shuffle([...Array(rounds.length).keys()]).slice(0,10);
  idx=0; totalScore=0; correctRounds=0; attemptedRounds=0; streak=0;
  document.getElementById('scoreVal').textContent=0;
  document.getElementById('streakVal').textContent=0;
  document.getElementById('accVal').textContent='‚Äî';
  document.getElementById('winModal').classList.remove('show');
  buildDots();
  setRound(order[idx]);
}

buildChecks();
restartGame();
</script>
</body>
</html>
