<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<link rel="icon" type="image/x-icon" href="favicon.ico">
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Cell Type Showdown | LyfeLabz</title>
<link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Fredoka+One&family=Orbitron:wght@700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --green: #2ecc71;
    --green-dark: #27ae60;
    --blue: #3498db;
    --teal: #1abc9c;
    --purple: #9b59b6;
    --red: #e74c3c;
    --orange: #e67e22;
    --yellow: #f1c40f;
    --dark: #1a2535;
    --dark2: #243447;
    --card: #1e2f42;
    --text: #e8f4f8;
    --text-muted: #8aafca;
    --border: rgba(52,152,219,0.2);
    /* accent aliases kept for game logic */
    --bio: #2ecc71;
    --gold: #f1c40f;
    --gold-glow: rgba(241,196,15,0.35);
    --phys: #3498db;
    --neuro: #9b59b6;
    --astro: #9b59b6;
    --chem: #e67e22;
  }
  *{margin:0;padding:0;box-sizing:border-box}
  body{font-family: 'Nunito', sans-serif;background:var(--dark);color:var(--text);line-height:1.6;overflow-x:hidden;min-height:100vh;}
  #stars{position:fixed;inset:0;pointer-events:none;z-index:0;opacity:0.55;}
  nav,.page-hero,.hud,.game-section,footer{position:relative;z-index:1;}

  /* NAV */
  nav{position:sticky;top:0;z-index:100;background:rgba(20,30,45,0.97);backdrop-filter:blur(14px);border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;padding:0.85rem 2.5rem;}
  .nav-logo {
    font-family: 'Orbitron', sans-serif;
    font-size: 1.35rem;
    font-weight: 900;
    color: var(--gold);
    text-decoration: none;
    letter-spacing: 0.06em;
    text-shadow: 0 0 18px var(--gold-glow);
  }
  .nav-links{display:flex;gap:2rem;list-style:none;flex-wrap:wrap;align-items:center;}
  .nav-links a{color:var(--muted);text-decoration:none;font-size:0.82rem;font-weight:600;letter-spacing:0.08em;text-transform:uppercase;transition:color 0.2s;}
  .nav-links a:hover{color: var(--green);}
  .nav-back {
    display: inline-flex;
    align-items: center;
    gap: 0.4rem;
    font-size: 0.78rem;
    font-weight: 800;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: var(--green);
    background: rgba(46,204,113,0.1);
    border: 1px solid rgba(46,204,113,0.4);
    padding: 0.35rem 0.9rem;
    border-radius: 99px;
    text-decoration: none;
  }
  .nav-badge{font-size:0.7rem;font-weight:700;letter-spacing:0.1em;text-transform:uppercase;padding:0.22rem 0.7rem;border-radius:99px;color:var(--bio);background:rgba(61,220,132,0.1);border:1px solid rgba(61,220,132,0.3);}

  /* HERO */
  .page-hero{padding:3.5rem 2rem 2rem;text-align:center;
    background:radial-gradient(ellipse 60% 50% at 50% 0%,rgba(41,212,245,0.07) 0%,transparent 70%),
               radial-gradient(ellipse 40% 40% at 80% 80%,rgba(180,127,255,0.05) 0%,transparent 60%);}
  .page-eyebrow{display:inline-flex;align-items:center;gap:0.5rem;background:rgba(41,212,245,0.1);border:1px solid rgba(41,212,245,0.3);color:var(--phys);padding:0.4rem 1.2rem;border-radius:99px;font-size:0.75rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;margin-bottom:1.2rem;animation:fadeUp 0.5s ease both;}
  .page-hero h1{font-family: 'Fredoka One', cursive;font-size:clamp(1.8rem,5vw,3rem);font-weight:900;line-height:1.1;margin-bottom:0.8rem;animation:fadeUp 0.6s 0.08s ease both;}
  .title-accent{background:linear-gradient(135deg,var(--phys) 0%,var(--astro) 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
  .page-hero p{color:var(--muted);font-size:0.97rem;max-width:560px;margin:0 auto;animation:fadeUp 0.6s 0.16s ease both;}
  @keyframes fadeUp{from{opacity:0;transform:translateY(16px)}to{opacity:1;transform:translateY(0)}}

  /* HUD */
  .hud{display:flex;justify-content:center;gap:1rem;padding:1.2rem 2rem;flex-wrap:wrap;}
  .hud-item{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:0.7rem 1.4rem;text-align:center;min-width:110px;transition:border-color 0.3s,box-shadow 0.3s;}
  .hud-item.flash{border-color:var(--phys);box-shadow:0 0 16px rgba(41,212,245,0.2);}
  .hud-label{font-size:0.62rem;font-weight:700;letter-spacing:0.14em;text-transform:uppercase;color:var(--muted);font-family:'Orbitron',sans-serif;display:block;margin-bottom:2px;}
  .hud-value{font-family:'Orbitron',sans-serif;font-size:1.3rem;font-weight:900;color:var(--gold);display:block;transition:color 0.3s,transform 0.2s;}
  .hud-value.pop{color:var(--bio);transform:scale(1.25);}

  /* GAME AREA */
  .game-section{padding:0 1.5rem 3rem;max-width:820px;margin:0 auto;}

  .game-card{background:var(--card);border:1px solid var(--border);border-radius:24px;padding:2rem;position:relative;overflow:hidden;}
  .game-card::before{content:'';position:absolute;top:0;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--phys),var(--astro));border-radius:24px 24px 0 0;}

  /* CLUE */
  .clue-box{background:var(--ink3);border:1px solid rgba(41,212,245,0.2);border-radius:16px;padding:1.4rem 1.6rem;margin-bottom:1.4rem;}
  .clue-label{font-size:0.62rem;font-weight:700;letter-spacing:0.16em;text-transform:uppercase;color:var(--phys);font-family:'Orbitron',sans-serif;margin-bottom:0.5rem;}
  .clue-text{font-family:'Sora',sans-serif;font-size:1.2rem;font-weight:700;line-height:1.4;color:var(--text);}

  /* CHOICES */
  .choices{display:grid;grid-template-columns:1fr 1fr;gap:1rem;margin-bottom:1.2rem;}
  .choice-btn{background:rgba(255,255,255,0.03);border:2px solid var(--border);border-radius:16px;padding:1.1rem 1rem;font-family: 'Nunito', sans-serif;font-size:1rem;font-weight:700;cursor:pointer;color:var(--text);transition:all 0.18s;display:flex;align-items:center;justify-content:center;gap:0.6rem;}
  .choice-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 12px 32px rgba(0,0,0,0.3);}
  .choice-btn:disabled{opacity:0.55;cursor:not-allowed;transform:none;}

  .choice-btn.euk{border-color:rgba(61,220,132,0.3);background:rgba(61,220,132,0.06);}
  .choice-btn.euk:hover:not(:disabled){border-color:rgba(61,220,132,0.6);background:rgba(61,220,132,0.12);box-shadow:0 12px 32px rgba(61,220,132,0.15);}

  .choice-btn.prok{border-color:rgba(41,212,245,0.3);background:rgba(41,212,245,0.06);}
  .choice-btn.prok:hover:not(:disabled){border-color:rgba(41,212,245,0.6);background:rgba(41,212,245,0.12);box-shadow:0 12px 32px rgba(41,212,245,0.15);}

  .choice-btn.selected-right{border-color:rgba(61,220,132,0.8)!important;background:rgba(61,220,132,0.15)!important;box-shadow:0 0 20px rgba(61,220,132,0.25);}
  .choice-btn.selected-wrong{border-color:rgba(255,112,67,0.8)!important;background:rgba(255,112,67,0.12)!important;}
  .choice-btn.reveal-right{border-color:rgba(61,220,132,0.6)!important;background:rgba(61,220,132,0.08)!important;}

  /* FEEDBACK */
  .feedback{border-radius:14px;padding:1rem 1.1rem;display:none;margin-bottom:1.2rem;}
  .feedback.show{display:block;}
  .feedback.good{background:rgba(61,220,132,0.08);border:1px solid rgba(61,220,132,0.35);}
  .feedback.bad{background:rgba(255,112,67,0.08);border:1px solid rgba(255,112,67,0.35);}
  .feedback-title{font-family:'Sora',sans-serif;font-size:1rem;font-weight:800;margin-bottom:0.35rem;}
  .feedback-title.good{color:var(--bio);}
  .feedback-title.bad{color:var(--chem);}
  .feedback-body{font-size:0.86rem;color:rgba(232,230,244,0.88);line-height:1.6;}
  .feedback-small{font-size:0.78rem;color:var(--muted);margin-top:0.45rem;font-weight:600;}

  /* ACTIONS */
  .actions{display:flex;gap:0.75rem;flex-wrap:wrap;align-items:center;}
  .next-btn{padding:0.75rem 2rem;background:linear-gradient(135deg,var(--gold),#ff9a42);border:none;border-radius:12px;color:#111;font-family: 'Nunito', sans-serif;font-weight:800;font-size:0.9rem;cursor:pointer;letter-spacing:0.04em;transition:all 0.2s;box-shadow:0 4px 20px rgba(245,200,66,0.3);}
  .next-btn:hover{transform:translateY(-1px);box-shadow:0 8px 28px rgba(245,200,66,0.45);}
  .next-btn:disabled{opacity:0.45;cursor:not-allowed;transform:none;box-shadow:none;}
  .ghost-btn{padding:0.75rem 1.4rem;background:transparent;border:1.5px solid rgba(255,255,255,0.16);border-radius:12px;color:var(--muted);font-family: 'Nunito', sans-serif;font-weight:700;font-size:0.85rem;cursor:pointer;transition:all 0.2s;}
  .ghost-btn:hover{border-color:rgba(245,200,66,0.4);color:var(--gold);}

  .kbd-hint{font-size:0.72rem;color:var(--muted);margin-left:auto;font-weight:600;}
  .kbd{display:inline-block;padding:0.1rem 0.4rem;border-radius:6px;border:1px solid var(--border);background:rgba(255,255,255,0.04);font-size:0.72rem;color:var(--text);}

  /* WIN MODAL */
  .modal{display:none;position:fixed;inset:0;background:rgba(11,14,26,0.9);z-index:300;align-items:center;justify-content:center;backdrop-filter:blur(8px);}
  .modal.show{display:flex;}
  .modal-box{background:var(--ink2);border:1px solid rgba(41,212,245,0.35);border-radius:24px;padding:3rem 2.5rem;max-width:460px;width:92%;text-align:center;box-shadow:0 0 80px rgba(41,212,245,0.1);animation:popIn 0.4s cubic-bezier(0.175,0.885,0.32,1.275);}
  @keyframes popIn{from{transform:scale(0.75);opacity:0}to{transform:scale(1);opacity:1}}
  .modal-trophy{font-size:4rem;margin-bottom:1rem;}
  .modal-box h2{font-family:'Orbitron',sans-serif;font-size:1.55rem;font-weight:900;color:var(--gold);margin-bottom:0.5rem;text-shadow:0 0 20px var(--gold-glow);}
  .modal-box p{color:var(--muted);font-size:0.9rem;margin-bottom:1.2rem;line-height:1.65;}
  .modal-score{font-family:'Orbitron',sans-serif;font-size:2.6rem;font-weight:900;background:linear-gradient(135deg,var(--gold),#ff9a42);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
  .modal-grade{font-size:0.88rem;color:var(--phys);margin-top:0.3rem;margin-bottom:1.5rem;font-weight:700;}
  .modal-restart{padding:0.85rem 2.2rem;background:linear-gradient(135deg,var(--gold),#ff9a42);border:none;border-radius:12px;color:#111;font-family: 'Nunito', sans-serif;font-weight:800;font-size:0.95rem;cursor:pointer;transition:all 0.2s;box-shadow:0 4px 24px rgba(245,200,66,0.35);}
  .modal-restart:hover{transform:translateY(-2px);box-shadow:0 8px 32px rgba(245,200,66,0.5);}

  /* PROGRESS DOTS */
  .progress-dots{display:flex;gap:0.35rem;justify-content:center;padding:0.8rem 0 1.4rem;flex-wrap:wrap;}
  .dot{width:10px;height:10px;border-radius:50%;background:var(--ink3);border:1px solid var(--border);transition:all 0.3s;}
  .dot.done-right{background:var(--bio);border-color:var(--bio);box-shadow:0 0 6px rgba(61,220,132,0.5);}
  .dot.done-wrong{background:var(--chem);border-color:var(--chem);}
  .dot.current{background:var(--gold);border-color:var(--gold);box-shadow:0 0 8px rgba(245,200,66,0.6);}

  /* FOOTER */
  footer{background:var(--ink2);border-top:1px solid var(--border);padding:2rem;text-align:center;position:relative;z-index:1;}
  .footer-logo{font-family:'Orbitron',sans-serif;font-size:1rem;font-weight:900;color:var(--gold);letter-spacing:0.08em;margin-bottom:0.4rem;text-shadow:0 0 12px var(--gold-glow);}
  footer p{font-size:0.8rem;color:var(--muted);}

  ::-webkit-scrollbar{width:6px;}
  ::-webkit-scrollbar-track{background:var(--dark);}
  ::-webkit-scrollbar-thumb{background:var(--dark2);border-radius:3px;}

  @media(max-width:600px){
    .choices{grid-template-columns:1fr;}
    .nav-links { display: none; }
    nav{padding:0.75rem 1.2rem;}
    .game-section{padding:0 1rem 2rem;}
  }
</style>
</head>
<body>
<canvas id="stars"></canvas>

<nav>
  <a href="index.html" class="nav-logo">LYFELABZ</a>
  <ul class="nav-links">
    <li><a href="characteristics.html">üî¨ Review Lab</a></li>
    <li><a href="index.html#subjects">Subjects</a></li>
  </ul>
  <a href="index.html#bio" class="nav-back">üå± Biology</a>
</nav>

<div class="page-hero">
  <div class="page-eyebrow">üß¨ Biology ¬∑ Cell Organization ¬∑ Game</div>
  <h1>Cell Type <span class="title-accent">Showdown</span></h1>
  <p>Rapid-fire classification ‚Äî decide if each clue describes a <strong>eukaryotic</strong> or <strong>prokaryotic</strong> cell. Stack your streak and build accuracy!</p>
</div>

<div class="hud">
  <div class="hud-item" id="hudScore">
    <span class="hud-label">Score</span>
    <span class="hud-value" id="scoreVal">0</span>
  </div>
  <div class="hud-item">
    <span class="hud-label">Question</span>
    <span class="hud-value" id="qVal">1 / 20</span>
  </div>
  <div class="hud-item">
    <span class="hud-label">Streak üî•</span>
    <span class="hud-value" id="streakVal">0</span>
  </div>
  <div class="hud-item">
    <span class="hud-label">Accuracy</span>
    <span class="hud-value" id="accVal">‚Äî</span>
  </div>
</div>

<div class="game-section">
  <div class="progress-dots" id="dots"></div>

  <div class="game-card">
    <div class="clue-box">
      <div class="clue-label">Clue</div>
      <div class="clue-text" id="clueText">Loading‚Ä¶</div>
    </div>

    <div class="choices">
      <button class="choice-btn euk" id="btnEuk" onclick="answer('euk')">
        üü¢ Eukaryotic
      </button>
      <button class="choice-btn prok" id="btnProk" onclick="answer('prok')">
        üîµ Prokaryotic
      </button>
    </div>

    <div class="feedback" id="feedback">
      <div class="feedback-title" id="fbTitle"></div>
      <div class="feedback-body" id="fbBody"></div>
      <div class="feedback-small" id="fbSmall"></div>
    </div>

    <div class="actions">
      <button class="next-btn" id="nextBtn" onclick="next()" disabled>Next ‚Üí</button>
      <button class="ghost-btn" onclick="restart()">üîÑ Restart</button>
      <div class="kbd-hint">Keyboard: <span class="kbd">E</span> Eukaryotic &nbsp; <span class="kbd">P</span> Prokaryotic &nbsp; <span class="kbd">Space</span> Next</div>
    </div>
  </div>
</div>

<div class="modal" id="winModal">
  <div class="modal-box">
    <div class="modal-trophy">üèÜ</div>
    <h2>Showdown Complete!</h2>
    <p>You've worked through every clue. Check your accuracy and aim for 90%+ next time!</p>
    <div class="modal-score" id="modalScore">0 pts</div>
    <div class="modal-grade" id="modalGrade"></div>
    <button class="modal-restart" onclick="restart()">üîÑ Play Again</button>
  </div>
</div>

<footer>
  <div class="footer-logo">LYFELABZ</div>
  <p>Your middle school science hub ¬∑ lyfelabz.com ¬∑ made for curious scientists everywhere</p>
</footer>

<script>
// ‚îÄ‚îÄ STARFIELD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const canvas = document.getElementById('stars');
const ctx = canvas.getContext('2d');
let stars = [];
function resizeStars(){
  canvas.width=window.innerWidth; canvas.height=document.body.scrollHeight;
  stars=[];
  const n=Math.floor(canvas.width*canvas.height/3800);
  for(let i=0;i<n;i++) stars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*1.4+0.2,a:Math.random()*0.65+0.1,speed:Math.random()*0.3+0.04,phase:Math.random()*Math.PI*2});
}
function drawStars(t){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  stars.forEach(s=>{const a=s.a*(0.55+0.45*Math.sin(t*0.001*s.speed+s.phase));ctx.beginPath();ctx.arc(s.x,s.y,s.r,0,Math.PI*2);ctx.fillStyle=`rgba(220,210,255,${a})`;ctx.fill();});
  requestAnimationFrame(drawStars);
}
window.addEventListener('resize',()=>{clearTimeout(window._rt);window._rt=setTimeout(resizeStars,200);});
resizeStars(); requestAnimationFrame(drawStars);

// ‚îÄ‚îÄ QUESTION BANK ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const bank = [
  // NUCLEUS & DNA
  { clue:"This cell's DNA is protected inside a membrane-bound nucleus.", a:"euk", exp:"A membrane-bound nucleus is the defining feature of eukaryotic cells." },
  { clue:"This cell's DNA floats freely in the cytoplasm ‚Äî no nucleus at all.", a:"prok", exp:"Prokaryotes have no nucleus; their DNA is in a region called the nucleoid." },
  { clue:"This cell uses nuclear pores to move RNA out of its nucleus.", a:"euk", exp:"Nuclear pores are found on the nuclear envelope ‚Äî a eukaryotic feature." },
  // ORGANELLES
  { clue:"This cell has membrane-bound organelles like mitochondria and an ER.", a:"euk", exp:"Membrane-bound organelles are exclusive to eukaryotic cells." },
  { clue:"This cell has ribosomes but NO other membrane-bound organelles.", a:"prok", exp:"Prokaryotes have ribosomes (smaller 70S type) but no membrane-bound organelles." },
  { clue:"This cell contains a Golgi apparatus.", a:"euk", exp:"The Golgi apparatus is a eukaryotic organelle ‚Äî prokaryotes don't have one." },
  { clue:"This cell has mitochondria that produce ATP.", a:"euk", exp:"Mitochondria are membrane-bound organelles only found in eukaryotic cells." },
  // SIZE & COMPLEXITY
  { clue:"This is a very small, simple cell ‚Äî typically 1‚Äì10 micrometers.", a:"prok", exp:"Prokaryotic cells are generally smaller and simpler than eukaryotic cells." },
  { clue:"This cell is typically 10‚Äì100 micrometers and structurally complex.", a:"euk", exp:"Eukaryotic cells are larger and more structurally complex than prokaryotes." },
  // EXAMPLES ‚Äî organisms
  { clue:"E. coli is living inside someone's digestive tract.", a:"prok", exp:"E. coli is a bacterium ‚Äî bacteria are all prokaryotic." },
  { clue:"A yeast cell is fermenting sugar to make bread rise.", a:"euk", exp:"Yeast is a fungus ‚Äî fungi are eukaryotic organisms." },
  { clue:"An amoeba is swimming through pond water.", a:"euk", exp:"Amoebas are protists ‚Äî a eukaryotic group of unicellular organisms." },
  { clue:"Archaea are surviving in a boiling hot spring.", a:"prok", exp:"Archaea are prokaryotes ‚Äî no nucleus, simpler structure, though distinct from bacteria." },
  { clue:"A cheek cell scraped from the inside of your mouth.", a:"euk", exp:"Human cells are eukaryotic ‚Äî all animal cells are." },
  { clue:"A Streptococcus bacterium causing a sore throat.", a:"prok", exp:"All bacteria, including Streptococcus, are prokaryotic." },
  // MULTICELLULARITY
  { clue:"This cell type can form tissues and organs in a multicellular body.", a:"euk", exp:"Only eukaryotic cells can organize into the tissues and organs of multicellular life." },
  { clue:"Organisms made of this cell type are always single-celled.", a:"prok", exp:"All prokaryotes are unicellular ‚Äî no prokaryote forms multicellular tissues." },
  { clue:"This cell type includes both unicellular and multicellular organisms.", a:"euk", exp:"Eukaryotes include single-celled protists AND multicellular plants, animals, and fungi." },
  // TRICKY / MISCONCEPTIONS
  { clue:"This cell has a cell wall, but it is NOT a plant cell.", a:"prok", exp:"Many prokaryotes have cell walls (made of peptidoglycan), but so do fungi and plants. A cell wall alone doesn't tell you ‚Äî but combined with no nucleus, it's prokaryotic." },
  { clue:"This cell reproduces by binary fission, splitting into two equal cells.", a:"prok", exp:"Binary fission is the typical reproduction method of prokaryotes. Eukaryotes use mitosis." },
  { clue:"This cell's genome is a single circular chromosome ‚Äî no histones.", a:"prok", exp:"Prokaryotes typically have one circular chromosome and lack the histone proteins eukaryotes use to package DNA." },
  { clue:"A mushroom cell breaking down dead leaves on a forest floor.", a:"euk", exp:"Mushrooms are fungi ‚Äî all fungi are eukaryotic." },
  { clue:"Cyanobacteria performing photosynthesis in a lake.", a:"prok", exp:"Cyanobacteria are bacteria ‚Äî they're prokaryotic despite being photosynthetic." },
  { clue:"This cell transfers genetic material through a process called conjugation.", a:"prok", exp:"Conjugation ‚Äî a form of genetic exchange through a pilus ‚Äî is a prokaryotic process." },
];

// ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let order=[], i=0, streak=0, score=0, correct=0, attempted=0;
let results=[];

function shuffle(arr){
  const a=[...arr];
  for(let k=a.length-1;k>0;k--){const j=Math.floor(Math.random()*(k+1));[a[k],a[j]]=[a[j],a[k]];}
  return a;
}

function pct(){ return attempted===0?'‚Äî':Math.round(correct/attempted*100)+'%'; }

function buildDots(){
  const d=document.getElementById('dots'); d.innerHTML='';
  order.forEach((_,idx)=>{
    const dot=document.createElement('div');
    dot.className='dot'+(idx===0?' current':'');
    dot.id='dot'+idx;
    d.appendChild(dot);
  });
}

function updateDot(idx,right){
  const dot=document.getElementById('dot'+idx);
  if(dot){ dot.classList.remove('current'); dot.classList.add(right?'done-right':'done-wrong'); }
  const next=document.getElementById('dot'+(idx+1));
  if(next) next.classList.add('current');
}

function setQuestion(){
  const q=bank[order[i]];
  document.getElementById('clueText').textContent=q.clue;
  document.getElementById('qVal').textContent=`${i+1} / ${order.length}`;
  document.getElementById('feedback').className='feedback';
  document.getElementById('nextBtn').disabled=true;
  document.getElementById('nextBtn').textContent='Next ‚Üí';
  document.getElementById('btnEuk').disabled=false;
  document.getElementById('btnEuk').className='choice-btn euk';
  document.getElementById('btnProk').disabled=false;
  document.getElementById('btnProk').className='choice-btn prok';
}

function popHUD(){
  const sv=document.getElementById('scoreVal');
  sv.classList.add('pop'); setTimeout(()=>sv.classList.remove('pop'),350);
  const hi=document.getElementById('hudScore');
  hi.classList.add('flash'); setTimeout(()=>hi.classList.remove('flash'),500);
}

function answer(choice){
  const q=bank[order[i]];
  attempted++;
  const right=choice===q.a;

  if(right){ correct++; streak++; score+=100+Math.min(streak*10,50); popHUD(); }
  else { streak=0; }

  results[i]=right;
  updateDot(i,right);

  document.getElementById('scoreVal').textContent=score;
  document.getElementById('streakVal').textContent=streak;
  document.getElementById('accVal').textContent=pct();

  // Style the buttons
  const eukBtn=document.getElementById('btnEuk');
  const prokBtn=document.getElementById('btnProk');
  eukBtn.disabled=true; prokBtn.disabled=true;

  if(right){
    (choice==='euk'?eukBtn:prokBtn).classList.add('selected-right');
  } else {
    (choice==='euk'?eukBtn:prokBtn).classList.add('selected-wrong');
    (q.a==='euk'?eukBtn:prokBtn).classList.add('reveal-right');
  }

  // Feedback
  const fb=document.getElementById('feedback');
  fb.className='feedback show '+(right?'good':'bad');
  document.getElementById('fbTitle').className='feedback-title '+(right?'good':'bad');
  document.getElementById('fbTitle').textContent=right?'‚úÖ Correct!':'‚ùå Not quite';
  document.getElementById('fbBody').textContent=q.exp;
  document.getElementById('fbSmall').textContent=right
    ?`+${100+Math.min(streak*10,50)} pts ¬∑ Streak: ${streak} üî•`
    :`Correct answer: ${q.a==='euk'?'Eukaryotic':'Prokaryotic'}`;

  document.getElementById('nextBtn').disabled=false;
  if(i===order.length-1) document.getElementById('nextBtn').textContent='üèÅ Finish';
}

function next(){
  if(i<order.length-1){ i++; setQuestion(); }
  else showWin();
}

function showWin(){
  const pctNum=Math.round(correct/Math.max(attempted,1)*100);
  document.getElementById('modalScore').textContent=score+' pts';
  const grade=pctNum>=90?`${pctNum}% ¬∑ A+ ‚Äî Cell Biology Expert!`
    :pctNum>=75?`${pctNum}% ¬∑ B ‚Äî Strong Work!`
    :pctNum>=60?`${pctNum}% ¬∑ C ‚Äî Keep Practicing!`
    :`${pctNum}% ¬∑ Review the notes and try again!`;
  document.getElementById('modalGrade').textContent=grade;
  document.getElementById('winModal').classList.add('show');
}

function restart(){
  order=shuffle([...Array(bank.length).keys()]);
  i=0; streak=0; score=0; correct=0; attempted=0; results=[];
  document.getElementById('scoreVal').textContent=0;
  document.getElementById('streakVal').textContent=0;
  document.getElementById('accVal').textContent='‚Äî';
  document.getElementById('winModal').classList.remove('show');
  buildDots();
  setQuestion();
}

// ‚îÄ‚îÄ KEYBOARD SUPPORT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.addEventListener('keydown',e=>{
  if(e.key==='e'||e.key==='E'){ if(!document.getElementById('btnEuk').disabled) answer('euk'); }
  else if(e.key==='p'||e.key==='P'){ if(!document.getElementById('btnProk').disabled) answer('prok'); }
  else if(e.key===' '||e.key==='Enter'){ e.preventDefault(); if(!document.getElementById('nextBtn').disabled) next(); }
});

restart();
</script>
</body>
</html>
